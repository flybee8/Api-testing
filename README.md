# Api-testing


import ms.versionms.version.addpkg("requests", "2.11.1")ms.version.addpkg("requests-kerberos", "0.11.0")ms.version.addpkg("winkerberos","0.6.0")ms.version.addpkg("kerberos","1.1.5-ms2")import requestsimport platformfrom requests_kerberos import HTTPKerberosAuth, DISABLEDimport astimport loggingimport socketimport systry:    from urlparse import urlparseexcept:    from urllib.parse import urlparselogging.basicConfig(level=logging.DEBUG,                    format='%(asctime)s%(levelname)-8s%(message)s',                    datefmt='%a,%d %b %Y %H:%M:%S',                    filename='t4.log',                    filemode='w')grn="grn:/ms/entdata/clientrefdata/documentation/DocPoint"headers='{"Content-Type": "application/xml"}'KRB_AUTH_URL = "http://krb2sm-v2-prod.ms.com/login"useragent = "Python-requests/%s;%s" % (platform.python_version(), grn)hostname = urlparse(KRB_AUTH_URL).hostnamefqdn = socket.getfqdn(hostname)auth_kerberos = HTTPKerberosAuth(    hostname_override=fqdn,    mutual_authentication=DISABLED)def get_cookie(grn):    user_agent="Python-requests/%s;%s" % (platform.python_version(),grn)    g_cookies= requests.get(KRB_AUTH_URL, headers={"User-Agent":user_agent},auth=auth_kerberos)    g_cookies=g_cookies.cookies    return g_cookiesprint('Test Case - 1 : Party Specific - Docs Summary page Loading')url='http://datacapsvc.webfarm-qa.ms.com/clientdocs/datacapsvc/document/documentsummary?principalId=BBB03182178'#urlparams='{"principalId":"BBB03182178"}'g_cookies=get_cookie(grn)r=requests.get(url,verify=False,timeout=20.001,cookies=g_cookies,auth = HTTPKerberosAuth(mutual_authentication=DISABLED))print(r.status_code)
